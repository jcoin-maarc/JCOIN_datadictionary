$schema: "http://json-schema.org/draft-04/schema#"

id: "record_and_linkage_variables"
title: Record and Linkage Variables
type: object
category: clinical
program: '*'
project: '*'
description: >
    The interviewer will read the statements below to the participant first. We are interested in the type of opioid use disorder treatment the participant would most prefer if all options were available to the participant now. The questions below ask in more detail about the participants most preferred treatment type. (Please note: the treatment types below are not necessarily offered in this study).
additionalProperties: false
submittable: true
validators: null

systemProperties:
  - id
  - project_id
  - state
  - created_datetime
  - updated_datetime

links:
  - name: follow_ups
    backref: record_and_linkage_variabless
    label: performed_at
    target_type: follow_up
    multiplicity: many_to_one
    required: true

required:
  - submitter_id
  - type
  - follow_ups

uniqueKeys:
  - [ id ]
  - [ project_id, submitter_id ]

properties:
  $ref: "_definitions.yaml#/ubiquitous_properties"
    
  XHub:
    description: >
      Code for hub
    enum:
        - "1"
        - "2"
        - "3"
        - "4"
    
  follow_ups:
    $ref: "_definitions.yaml#/to_one"